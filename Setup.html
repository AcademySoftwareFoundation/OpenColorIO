

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenColorIO</title>

    
    <link rel="stylesheet" href="_static/ocio.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="OpenColorIO v0.8.1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="header"><h1 class="heading"><a href="index.html">
          <span>OpenColorIO</span></a></h1>
        <h2 class="heading"><span>Open Source Color Management</span></h2>
      </div>
      <div class="topnav">
      OpenColorIO v0.8.1 documentation
      </div>
      <div class="content">
        
        <table width="100%" cellspacing="0" cellpadding="0">
        <tr>
        <td width="200">
            <div class="sidebar2">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow/index.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers/index.html">Developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeLog.html">ChangeLog</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
</ul>

            </div>
        </td>
        <td width="100%" id="bodycontent">
        
<div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-from-source">
<span id="id1"></span><h2>Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<p>While there are an almost infinite number of setups, the following
steps should cover many common setups.</p>
<p>The basic requirements are:</p>
<ul class="simple">
<li>cmake &gt;2.8</li>
<li>(optional) Python 2.x (for the Python bindings)</li>
<li>(optional) Nuke 6.x (for the Nuke nodes)</li>
<li>(optional) Truelight SDK (for TruelightTransform)</li>
</ul>
<p>In the OCIO source directory, make a build directory (optionally, but
highly recommended):</p>
<div class="highlight-python"><pre>$ mkdir build &amp;&amp; cd build</pre>
</div>
<p>Then run cmake:</p>
<div class="highlight-python"><pre>$ cmake -D CMAKE_INSTALL_PREFIX=install ../</pre>
</div>
<p>You should see something along the lines of:</p>
<div class="highlight-python"><pre>-- Configuring done
-- Generating done
-- Build files have been written to: .../build</pre>
</div>
<p>Next, to build (with the <tt class="docutils literal"><span class="pre">-j</span></tt> flag to build using 8 CPU cores):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">make</span> <span class="o">-</span><span class="n">j8</span>
</pre></div>
</div>
<p>Finally, to install into the CMAKE_INSTALL_PREFIX (the install
directory):</p>
<div class="highlight-python"><pre>make install</pre>
</div>
<p>If nothing went wrong, you should now have an <tt class="docutils literal"><span class="pre">include/</span></tt> directory
containing the OpenColorIO headers, and a <tt class="docutils literal"><span class="pre">lib/</span></tt> directory
containing the libOpenColorIO library (a .dylib, .so or .dll file)</p>
<div class="section" id="enabling-optional-components">
<span id="id2"></span><h3>Enabling optional components<a class="headerlink" href="#enabling-optional-components" title="Permalink to this headline">¶</a></h3>
<p>The OpenColourIO library is probably not all you want - the Python
libraries bindings, the Nuke nodes and other included applications are only
built if their dependencies are found.</p>
<p>In the case of the Python bindings, the dependencies are the Python
headers for the version you wish to use. These may be picked up by
default - if so, when you run cmake, you would see:</p>
<div class="highlight-python"><pre>-- Python 2.6 okay, will build the Python bindings against .../include/python2.6</pre>
</div>
<p>If not, you can point cmake to correct Python executable using the
<tt class="docutils literal"><span class="pre">-D</span> <span class="pre">PYTHON=...</span></tt> cmake flag:</p>
<div class="highlight-python"><pre>$ cmake -D PYTHON=/my/custom/python2.6</pre>
</div>
<p>Same process with Nuke (although it less likely to be picked up
automatically). Point cmake to your Nuke install directory using <tt class="docutils literal"><span class="pre">-D</span>
<span class="pre">NUKE_INSTALL_PATH</span></tt>:</p>
<div class="highlight-python"><pre>$ cmake -D NUKE_INSTALL_PATH=/Applications/Nuke6.2v1/Nuke6.2v1.app/Contents/MacOS/</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">NUKE_INSTALL_PATH</span></tt> directory should contain the Nuke executable
(e.g Nuke6.2v1), and a <tt class="docutils literal"><span class="pre">include/</span></tt> directory containing <tt class="docutils literal"><span class="pre">DDImage/</span></tt>
and others.</p>
<p>If set correctly, you will see something similar to:</p>
<div class="highlight-python"><pre>-- Found Nuke: /Applications/Nuke6.2v1/Nuke6.2v1.app/Contents/MacOS/include
-- Nuke_DDImageVersion: --6.2v1--</pre>
</div>
<p>The Nuke plugins are installed into <tt class="docutils literal"><span class="pre">lib/$NUKE_VERSION/</span></tt>, e.g
<tt class="docutils literal"><span class="pre">lib/nuke6.2v1/OCIODisdplay.so</span></tt></p>
<p>Note that if you are using the Nuke plugins, you should compile the
Python bindings for the same version of Python that Nuke uses
internally. For Nuke 6.0 and 6.1 this is Python 2.5, and for 6.2 it is
Python 2.6</p>
<p>The applications included with OCIO have various dependencies - to
determine these, look at the CMake output when first run:</p>
<div class="highlight-python"><pre>-- Not building ocioconvert. Requirement(s) found: OIIO:FALSE</pre>
</div>
</div>
</div>
<div class="section" id="environment-setup">
<span id="id3"></span><h2>Environment setup<a class="headerlink" href="#environment-setup" title="Permalink to this headline">¶</a></h2>
<dl class="envvar">
<dt id="envvar-OCIO">
<tt class="descname">OCIO</tt><a class="headerlink" href="#envvar-OCIO" title="Permalink to this definition">¶</a></dt>
<dd><p>This env needs to point to the global profile.yaml</p>
</dd></dl>

<dl class="envvar">
<dt id="envvar-DYLD_LIBRARY_PATH">
<tt class="descname">DYLD_LIBRARY_PATH</tt><a class="headerlink" href="#envvar-DYLD_LIBRARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">lib/</span></tt> folder (containing <tt class="docutils literal"><span class="pre">libOpenColorIO.dylib</span></tt>) must be
on the <tt class="docutils literal"><span class="pre">DYLD_LIBRARY_PATH</span></tt> search path, or you will get an error
similar to:</p>
<div class="highlight-python"><pre>dlopen(.../OCIOColorSpace.so, 2): Library not loaded: libOpenColorIO.dylib
Referenced from: .../OCIOColorSpace.so
Reason: image not found</pre>
</div>
<p>This applies to anything that links against OCIO, including the Nuke
nodes, and the <tt class="docutils literal"><span class="pre">PyOpenColorIO</span></tt> Python bindings.</p>
</dd></dl>

<dl class="envvar">
<dt id="envvar-LD_LIBRARY_PATH">
<tt class="descname">LD_LIBRARY_PATH</tt><a class="headerlink" href="#envvar-LD_LIBRARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to the <tt class="docutils literal"><span class="pre">DYLD_LIBRARY_PATH</span></tt> on Linux</p>
</dd></dl>

<dl class="envvar">
<dt id="envvar-PYTHONPATH">
<tt class="descname">PYTHONPATH</tt><a class="headerlink" href="#envvar-PYTHONPATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Python&#8217;s module search path. If you are using the PyOpenColorIO module,
you must add <tt class="docutils literal"><span class="pre">lib/python2.x</span></tt> to this search path (e.g <tt class="docutils literal"><span class="pre">python/2.5</span></tt>),
or importing the module will fail:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">PyOpenColorIO</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n-Identifier">&lt;module&gt;</span>
<span class="nc">ImportError</span>: <span class="n-Identifier">No module named PyOpenColorIO</span>
</pre></div>
</div>
<p>Note that <span class="target" id="index-0"></span><a class="reference internal" href="installation.html#envvar-DYLD_LIBRARY_PATH"><tt class="xref std std-envvar docutils literal"><span class="pre">DYLD_LIBRARY_PATH</span></tt></a> or <span class="target" id="index-1"></span><a class="reference internal" href="installation.html#envvar-LD_LIBRARY_PATH"><tt class="xref std std-envvar docutils literal"><span class="pre">LD_LIBRARY_PATH</span></tt></a> must
be set correctly for the module to work.</p>
</dd></dl>

<dl class="envvar">
<dt id="envvar-NUKE_PATH">
<tt class="descname">NUKE_PATH</tt><a class="headerlink" href="#envvar-NUKE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Nuke&#8217;s customisation search path, where it will look for plugins,
gizmos, init.py and menu.py scripts and other customisations.</p>
<p>For information on setting this for OCIO, see <a class="reference internal" href="installation.html#nuke-configuration"><em>Nuke Configuration</em></a></p>
</dd></dl>

</div>
<div class="section" id="nuke-configuration">
<span id="id4"></span><h2>Nuke Configuration<a class="headerlink" href="#nuke-configuration" title="Permalink to this headline">¶</a></h2>
<p>If you build the OCIO Nuke plugins, they will be installed into
<tt class="docutils literal"><span class="pre">lib/$NUKE_VERSION</span></tt> (for example: <cite>lib/nuke6.2v1</cite>). The bear-minimum
required to use the plugins is to point the NUKE_PATH environment
variable to this directory.</p>
<p>However, you probably want to load the plugins, and add them to the
menu - so also add <tt class="docutils literal"><span class="pre">$BUILD_DIR/share/nuke</span></tt> to <tt class="docutils literal"><span class="pre">NUKE_PATH</span></tt>, and
when Nuke is run it will execute two scripts, <tt class="docutils literal"><span class="pre">init.py</span></tt> which
automatically loads all OCIO plugins, and <tt class="docutils literal"><span class="pre">menu.py</span></tt> which adds them
to a OCIO menu under the Color node menu.</p>
<p>The OCIO workflow within Nuke is a different topic, but one common
setup step is to register an OCIODisplay node as a viewer process (to
apply a viewer LUT)</p>
<p>To do this, we you use the OCIO Python bindings to find all configured
display devices (e.g sRGB device, DCIP3 device) and transforms (e.g
Film emulation, raw and log), then register a viewer processor each
combination.</p>
<p>The following function is defined in the OCIO-supplied menu.py file,
so you can simply call <tt class="docutils literal"><span class="pre">ocio_populate_viewer()</span></tt> in a custom menu.py
file (e.g in <tt class="docutils literal"><span class="pre">~/.nuke/menu</span></tt>)</p>
<p>Alternatively, if your workflow has different requirements, you can
copy the code and modify it as required, or use it as reference to
write your own, better viewer setup function!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">ocio_populate_viewer</span><span class="p">(</span><span class="n">remove_nuke_default</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Registers the a viewer process for each display/transform, and</span>
<span class="sd">    sets the default</span>

<span class="sd">    Also unregisters the default Nuke viewer processes (sRGB/rec709)</span>
<span class="sd">    unless remove_nuke_default is False</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># TODO: How to we unregister all? This assumes no other luts</span>
    <span class="c"># have been registered by other viewer processes</span>
    <span class="k">if</span> <span class="n">remove_nuke_default</span><span class="p">:</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">ViewerProcess</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="s">&#39;rec709&#39;</span><span class="p">)</span>
        <span class="n">nuke</span><span class="o">.</span><span class="n">ViewerProcess</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="s">&#39;sRGB&#39;</span><span class="p">)</span>


    <span class="c"># Formats the display and transform, e.g &quot;Film1D (sRGB)&quot;</span>
    <span class="n">DISPLAY_UI_FORMAT</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%(view)s</span><span class="s"> (</span><span class="si">%(display)s</span><span class="s">)&quot;</span>

    <span class="kn">import</span> <span class="nn">PyOpenColorIO</span> <span class="kn">as</span> <span class="nn">OCIO</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">OCIO</span><span class="o">.</span><span class="n">GetCurrentConfig</span><span class="p">()</span>

    <span class="c"># For every display, loop over every view</span>
    <span class="k">for</span> <span class="n">display</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">getDisplays</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">getViews</span><span class="p">(</span><span class="n">display</span><span class="p">):</span>
            <span class="n">nuke</span><span class="o">.</span><span class="n">ViewerProcess</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">DISPLAY_UI_FORMAT</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;view&#39;</span><span class="p">:</span> <span class="n">view</span><span class="p">,</span> <span class="s">&quot;display&quot;</span><span class="p">:</span> <span class="n">display</span><span class="p">},</span>
                <span class="n">call</span> <span class="o">=</span> <span class="n">nuke</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">OCIODisplay</span><span class="p">,</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">(),</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;display&quot;</span><span class="p">:</span> <span class="n">display</span><span class="p">,</span> <span class="s">&quot;view&quot;</span><span class="p">:</span> <span class="n">view</span><span class="p">})</span>


    <span class="c"># Get the default display and view, register it as the</span>
    <span class="c"># default used on Nuke startup</span>
    <span class="n">defaultDisplay</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getDefaultDisplay</span><span class="p">()</span>
    <span class="n">defaultView</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getDefaultView</span><span class="p">(</span><span class="n">defaultDisplay</span><span class="p">)</span>

    <span class="n">nuke</span><span class="o">.</span><span class="n">knobDefault</span><span class="p">(</span>
        <span class="s">&quot;Viewer.viewerProcess&quot;</span><span class="p">,</span>
        <span class="n">DISPLAY_UI_FORMAT</span> <span class="o">%</span> <span class="p">{</span><span class="s">&#39;view&#39;</span><span class="p">:</span> <span class="n">defaultView</span><span class="p">,</span> <span class="s">&quot;display&quot;</span><span class="p">:</span> <span class="n">defaultDisplay</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>

    

        </td>
        </tr></table>
        <br>
      </div>
      <div class="bottomnav">
      
        <p>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2010, Sony Pictures Imageworks.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>